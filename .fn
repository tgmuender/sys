ousb() {
    sudo cryptsetup open $1 usb-crypt --type luks2
    sudo mount /dev/mapper/usb-crypt /mnt/usb-crypt
}

cusb() {
    sudo cryptsetup close usb-crypt
}

swagger-ui() {
    # see https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/configuration.md#docker for a list of
    # available configuration options (env variables)

    local HOST_PORT=$1
    local OPENAPI_FILE=$2
    local BASEDIR=$(pwd)

    if [ $# -ne 2 ]; then
        echo "Please specify port and OpenAPI file name.."
        return 1
    fi

    echo "Serving ${OPENAPI_FILE} with swagger-ui on port ${HOST_PORT}..."

    docker run \
    --rm \
    -p ${HOST_PORT}:8080 \
    -v ${BASEDIR}:/usr/share/nginx/html/app \
    -e DOC_EXPANSION=full \
    -e SWAGGER_JSON=/app/${OPENAPI_FILE} \
    -e URL=./app/${OPENAPI_FILE} \
    swaggerapi/swagger-ui &

    sleep 2
    xdg-open "http://localhost:${HOST_PORT}"
    fg
}
